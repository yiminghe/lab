KISSY.Editor.add("preview",function(e){var c=KISSY.Editor,i=KISSY,j=c.TripleButton;c.Preview||function(){function f(b){this.editor=b;this._init()}i.augment(f,{_init:function(){this.el=new j({container:this.editor.toolBarDiv,title:"预览",contentCls:"ke-toolbar-preview"});this.el.on("offClick",this._show,this)},_show:function(){var b=this.editor,a=640,g=420,h=80;try{var d=window.screen;a=Math.round(d.width*0.8);g=Math.round(d.height*0.7);h=Math.round(d.width*0.1)}catch(k){}b=b._prepareIFrameHtml().replace(/<body[^>]+>.+<\/body>/,
"<body>\n"+b.getData()+"\n</body>");a=window.open("",null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+a+",height="+g+",left="+h);a.document.open();a.document.write(b);a.document.close();a.focus()}});c.Preview=f}();e.addPlugin(function(){new c.Preview(e)})});
