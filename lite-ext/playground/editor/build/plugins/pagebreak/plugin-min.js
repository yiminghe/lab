KISSY.Editor.add("pagebreak",function(g){var h=KISSY,f=h.Editor,i=g.htmlDataProcessor,j=i&&i.dataFilter,k="ke_pagebreak",l="div";j&&j.addRules({elements:{div:function(b){var c=b.attributes;var a=(c=c&&c.style)&&b.children.length==1&&b.children[0];if((a=a&&a.name=="span"&&a.attributes.style)&&/page-break-after\s*:\s*always/i.test(c)&&/display\s*:\s*none/i.test(a))return i.createFakeParserElement(b,k,l)}}});f.PageBreak||function(){function b(d){var m=new a({container:d.toolBarDiv,title:"分页",contentCls:"ke-toolbar-pagebreak"});
m.on("offClick",function(){var e=new c(n,null,d.document);e=d.createFakeElement?d.createFakeElement(e,k,l,true,n):e;e=(new c("<div>",null,d.document)).append(e);d.insertElement(e)});this.el=m;f.Utils.sourceDisable(d,this)}var c=h.Node,a=f.TripleButton,n='<div style="page-break-after: always; "><span style="DISPLAY:none">&nbsp;</span></div>';h.augment(b,{disable:function(){this.el.set("state",a.DISABLED)},enable:function(){this.el.set("state",a.OFF)}});f.PageBreak=b}();g.addPlugin(function(){new f.PageBreak(g)})});
